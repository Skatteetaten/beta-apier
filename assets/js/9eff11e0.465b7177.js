"use strict";(self.webpackChunkbeta_apier=self.webpackChunkbeta_apier||[]).push([[7967],{3905:(e,n,t)=>{t.d(n,{Zo:()=>o,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function k(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},o=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},d="mdxType",v={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,o=k(e,["components","mdxType","originalType","parentName"]),d=p(t),g=a,m=d["".concat(s,".").concat(g)]||d[g]||v[g]||i;return t?r.createElement(m,l(l({ref:n},o),{},{components:t})):r.createElement(m,l({ref:n},o))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=g;var k={};for(var s in n)hasOwnProperty.call(n,s)&&(k[s]=n[s]);k.originalType=e,k[d]="string"==typeof e?e:a,l[1]=k;for(var p=2;p<i;p++)l[p]=t[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},7670:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>k,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const i={},l="Beskrivelse av tjenester",k={unversionedId:"innkrevingsoppdrag/beskrivelse-av-tjenester",id:"innkrevingsoppdrag/beskrivelse-av-tjenester",title:"Beskrivelse av tjenester",description:"Lenke til API-dokumentasjonen finnes i menyen til venstre. Under f\xf8lger en beskrivelse av hvordan de ulike tjenestene",source:"@site/docs/innkrevingsoppdrag/beskrivelse-av-tjenester.md",sourceDirName:"innkrevingsoppdrag",slug:"/innkrevingsoppdrag/beskrivelse-av-tjenester",permalink:"/beta-apier/innkrevingsoppdrag/beskrivelse-av-tjenester",draft:!1,tags:[],version:"current",lastUpdatedAt:1734019646,formattedLastUpdatedAt:"12. des. 2024",frontMatter:{},sidebar:"docs",previous:{title:"Anbefalinger for bruk",permalink:"/beta-apier/innkrevingsoppdrag/anbefalinger-for-bruk"},next:{title:"Funksjonell beskrivelse",permalink:"/beta-apier/innkrevingsoppdrag/funksjonell-beskrivelse"}},s={},p=[{value:"Innholdsfortegnelse",id:"innholdsfortegnelse",level:2},{value:"Opprett et innkrevingsoppdrag",id:"opprett-et-innkrevingsoppdrag",level:2},{value:"Synkron validering ved mottak",id:"synkron-validering-ved-mottak",level:3},{value:"Asynkron validering",id:"asynkron-validering",level:3},{value:"Hent mottaksbekreftelse",id:"hent-mottaksbekreftelse",level:3},{value:"Hent valideringsfeil",id:"hent-valideringsfeil",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering",level:3},{value:"Sekvensdiagram",id:"sekvensdiagram",level:3},{value:"Endre et innkrevingsoppdrag",id:"endre-et-innkrevingsoppdrag",level:2},{value:"Synkron validering ved mottak",id:"synkron-validering-ved-mottak-1",level:3},{value:"Asynkron validering",id:"asynkron-validering-1",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-1",level:3},{value:"Sekvensdiagram",id:"sekvensdiagram-1",level:3},{value:"Avskriv et innkrevingsoppdrag",id:"avskriv-et-innkrevingsoppdrag",level:2},{value:"Synkron validering ved mottak",id:"synkron-validering-ved-mottak-2",level:3},{value:"Asynkron validering",id:"asynkron-validering-2",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-2",level:3},{value:"Sekvensdiagram",id:"sekvensdiagram-2",level:3},{value:"Grensesnittavstemming av et innkrevingsoppdrag",id:"grensesnittavstemming-av-et-innkrevingsoppdrag",level:2},{value:"Se kravdetaljer",id:"se-kravdetaljer",level:2}],o={toc:p};function d(e){let{components:n,...i}=e;return(0,a.kt)("wrapper",(0,r.Z)({},o,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"beskrivelse-av-tjenester"},"Beskrivelse av tjenester"),(0,a.kt)("p",null,"Lenke til API-dokumentasjonen finnes i menyen til venstre. Under f\xf8lger en beskrivelse av hvordan de ulike tjenestene\nbrukes, og eventuelle hensyn som m\xe5 tas."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Seksjonen vil utvides etter hvert som flere oppdragsgivere og typer krav st\xf8ttes.")),(0,a.kt)("h2",{id:"innholdsfortegnelse"},"Innholdsfortegnelse"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#beskrivelse-av-tjenester"},"Beskrivelse av tjenester"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#innholdsfortegnelse"},"Innholdsfortegnelse")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#opprett-et-innkrevingsoppdrag"},"Opprett et innkrevingsoppdrag"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#synkron-validering-ved-mottak"},"Synkron validering ved mottak")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#asynkron-validering"},"Asynkron validering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#hent-mottaksbekreftelse"},"Hent mottaksbekreftelse")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#hent-valideringsfeil"},"Hent valideringsfeil")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#feilh%C3%A5ndtering"},"Feilh\xe5ndtering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#sekvensdiagram"},"Sekvensdiagram")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#endre-et-innkrevingsoppdrag"},"Endre et innkrevingsoppdrag"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#synkron-validering-ved-mottak-1"},"Synkron validering ved mottak")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#asynkron-validering-1"},"Asynkron validering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#feilh%C3%A5ndtering-1"},"Feilh\xe5ndtering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#sekvensdiagram-1"},"Sekvensdiagram")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#avskriv-et-innkrevingsoppdrag"},"Avskriv et innkrevingsoppdrag"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#synkron-validering-ved-mottak-2"},"Synkron validering ved mottak")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#asynkron-validering-2"},"Asynkron validering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#feilh%C3%A5ndtering-2"},"Feilh\xe5ndtering")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#sekvensdiagram-2"},"Sekvensdiagram")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#grensesnittavstemming-av-et-innkrevingsoppdrag"},"Grensesnittavstemming av et innkrevingsoppdrag")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#se-kravdetaljer"},"Se kravdetaljer"))))),(0,a.kt)("h2",{id:"opprett-et-innkrevingsoppdrag"},"Opprett et innkrevingsoppdrag"),(0,a.kt)("p",null,"Et innkrevingsoppdrag opprettes i Skatteetatens innkrevingssystemer ved et POST-kall\ntil  ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag"),". F\xf8r innkrevingsoppdraget blir reskontrof\xf8rt og\nSkatteetaten overtar ansvaret for innkrevingen gj\xf8res det en validering. Valideringen skjer i to omganger; synkront og\nasynkront, beskrevet under."),(0,a.kt)("h3",{id:"synkron-validering-ved-mottak"},"Synkron validering ved mottak"),(0,a.kt)("p",null,"Tjenesten validerer ",(0,a.kt)("inlineCode",{parentName:"p"},"OpprettInnkrevingsoppdragRequest"),"-objektet som er meldingskroppen i POST-kallet. Denne valideringen\nsikrer at alle n\xf8dvendige felter er korrekt utfylt og at dataene stemmer overens med tjenestens API-spesifikasjon."),(0,a.kt)("p",null,"Et vellykket kall returnerer kvittering med en 201-statuskode sammen med en ",(0,a.kt)("em",{parentName:"p"},"kravidentifikator"),", som er Skatteetatens\nreferanse til innkrevingsoppdraget. Denne ",(0,a.kt)("em",{parentName:"p"},"kravidentifikatoren")," b\xf8r oppdragsgiver ta vare p\xe5 for sporbarhet, og for\nsenere \xe5 kunne referere til kravet."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTTP statuskode 201 bekrefter at Skatteetaten har ",(0,a.kt)("em",{parentName:"strong"},"mottatt")," innkrevingsoppdraget. Skatteetaten har enda ikke tatt over\nansvaret for innkrevingen - Se ",(0,a.kt)("a",{parentName:"strong",href:"#asynkron-validering"},"asynkron validering"),".")),(0,a.kt)("p",null,"Ved valideringsfeil returneres HTTP statuskode 422 samt informasjon om valideringsfeilen. Oppdragsgiver m\xe5 deretter\nkorrigere innkrevingsoppdraget og sende det inn p\xe5 nytt. ",(0,a.kt)("em",{parentName:"p"},"Merk: Etter korreksjon kan det oppst\xe5 ytterligere\nvalideringsfeil fra p\xe5f\xf8lgende valideringsregler ettersom valideringsreglene utf\xf8res sekvensielt.")),(0,a.kt)("h3",{id:"asynkron-validering"},"Asynkron validering"),(0,a.kt)("p",null,"Etter vellykket synkron validering (HTTP statuskode 201), foretas en ",(0,a.kt)("em",{parentName:"p"},"ekstra")," asynkron validering. Her gj\xf8res det en mer\nfunksjonell sjekk p\xe5 at innholdet i innkrevingsoppdraget er mulig for Skatteetaten \xe5 kreve inn. Se ",(0,a.kt)("a",{parentName:"p",href:"#hent-mottaksbekreftelse"},"hent\nmottaksbekreftelse"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"N\xe5r mottaksstatus er ",(0,a.kt)("inlineCode",{parentName:"strong"},"RESKONTROFOERT")," er mottaket vellykket, og ansvaret for videre oppf\xf8lging (innkreving) ligger hos\nSkatteetaten.")),(0,a.kt)("p",null,"Ved valideringsfeil vil mottaksstatus settes til ",(0,a.kt)("inlineCode",{parentName:"p"},"VALIDERINGSFEIL"),". Da m\xe5 feilene rettes av oppdragsgiver, og oppdatert\ninnkrevingsoppdrag m\xe5 sendes inn p\xe5 nytt. Ansvaret for oppf\xf8lging ligger da hos oppdragsgiver.\nSe ",(0,a.kt)("a",{parentName:"p",href:"#hent-valideringsfeil"},"hent valideringsfeil"),"."),(0,a.kt)("h3",{id:"hent-mottaksbekreftelse"},"Hent mottaksbekreftelse"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Opprett nytt innkrevingsoppdrag med POST-kall til ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag"),' (Se\n"Opprett et innkrevingsoppdrag"\ni ',(0,a.kt)("a",{parentName:"p",href:"https://app.swaggerhub.com/apis-docs/skatteetaten/oppdragsinnkreving-api/"},"SwaggerHub"),")."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Kallet er vellykket og f\xe5r en kvittering (201-statuskode) med en kravidentifikator."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Etter noen sekunder kan mottaksstatus hentes ved \xe5 gj\xf8re GET-kall med kravidentifikatoren\ntil ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/mottaksstatus"),' (se\n"Hent mottaksstatus for et innkrevingsoppdrag"\ni ',(0,a.kt)("a",{parentName:"p",href:"https://app.swaggerhub.com/apis-docs/skatteetaten/oppdragsinnkreving-api/"},"SwaggerHub"),")."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Hvis mottaksstatus er ",(0,a.kt)("inlineCode",{parentName:"p"},"MOTTATT_UNDER_BEHANDLING"),", behandler Skatteetaten det fortsatt."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Ansvaret for oppf\xf8lging ligger hos Skatteetaten."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Hvis mottaksstatus er ",(0,a.kt)("inlineCode",{parentName:"p"},"VALIDERINGSFEIL"),", m\xe5 valideringsfeil hentes ved GET-kall\ntil ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/valideringsfeil"),' (se\n"Hent valideringsfeil for et innkrevingsoppdrag"\ni ',(0,a.kt)("a",{parentName:"p",href:"https://app.swaggerhub.com/apis-docs/skatteetaten/oppdragsinnkreving-api/"},"SwaggerHub"),"). Deretter m\xe5\nfeilene rettes, og oppdatert innkrevingsoppdrag m\xe5 sendes inn p\xe5 nytt med en ny ",(0,a.kt)("inlineCode",{parentName:"p"},"oppdragsgiversKravidentifikator"),"."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"NB! Ansvaret for oppf\xf8lging ligger hos oppdragsgiver."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Hvis mottaksstatus er ",(0,a.kt)("inlineCode",{parentName:"p"},"RESKONTROFOERT")," er mottaket vellykket."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Ansvaret for oppf\xf8lging ligger hos Skatteetaten.")))))),(0,a.kt)("h3",{id:"hent-valideringsfeil"},"Hent valideringsfeil"),(0,a.kt)("p",null,"Eventuelle valideringsfeil\nfra ",(0,a.kt)("a",{parentName:"p",href:"#asynkron-validering"},"den asynkrone valideringen ved opprettelse av et innkrevingsoppdrag")," kan hentes ut ved et\nGET-kall til endepunktet ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/valideringsfeil"),"."),(0,a.kt)("p",null,"Dersom den asynkrone valideringen ikke har resultert i noen valideringsfeil, returneres en tom liste."),(0,a.kt)("h3",{id:"feilh\xe5ndtering"},"Feilh\xe5ndtering"),(0,a.kt)("p",null,"Tjenesten for opprettelse av nye krav sikrer unikhet p\xe5 ",(0,a.kt)("inlineCode",{parentName:"p"},"oppdragsgiversKravidentifikator"),". Dersom man f\xf8lger\n",(0,a.kt)("a",{parentName:"p",href:"/beta-apier/innkrevingsoppdrag/anbefalinger-for-bruk#utfylling-av-feltet-oppdragsgiverskravidentifikator-i-opprettinnkrevingsoppdragrequest"},"anbefalinger for bruk av tjenestene v\xe5re"),"\nog fyller ut dette feltet, kan man sende oppdraget p\xe5 nytt hvis man av ulike grunner er usikker p\xe5 om kravet faktisk har\nblitt opprettet hos Skatteetaten. Dersom kravet allerede finnes i v\xe5rt system, vil det returneres\nen HTTP 422-statuskode med en beskrivende feilmelding. Hvis det ikke finnes, vil innkrevingsoppdraget bli opprettet og\nprosessert. ",(0,a.kt)("em",{parentName:"p"},"Dette m\xf8nsteret for feilh\xe5ndtering kan kun benyttes om ",(0,a.kt)("inlineCode",{parentName:"em"},"oppdragsgiversKravidentifikator")," er utfylt.")),(0,a.kt)("h3",{id:"sekvensdiagram"},"Sekvensdiagram"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(4700).Z,width:"1248",height:"1175"})),(0,a.kt)("h2",{id:"endre-et-innkrevingsoppdrag"},"Endre et innkrevingsoppdrag"),(0,a.kt)("p",null,"Innkrevingsoppdrag kan endres ved et PUT-kall til f\xf8lgende endepunkter:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/hovedstol")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/renter")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/oppdragsgiversreferanse"))),(0,a.kt)("p",null,"Endrings-tjenestene brukes til \xe5 gj\xf8re korreksjoner p\xe5 et innkrevingsoppdrag, f.eks. der skyldner har betalt deler av\nbel\xf8pet til oppdragsgiver og det er behov for \xe5 nedjustere hovedstolen."),(0,a.kt)("p",null,"Merk at et innkrevingsoppdrag ikke kan endres umiddelbart etter opprettelse; det kan f\xf8rst endres etter at\nSkatteetaten har reskontrof\xf8rt det. Ved normal drift vil dette skje tiln\xe6rmet \xf8yeblikkelig."),(0,a.kt)("h3",{id:"synkron-validering-ved-mottak-1"},"Synkron validering ved mottak"),(0,a.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende foresp\xf8rsels-objektet for endring er iht.\nOpenAPI-spesifikasjonen."),(0,a.kt)("p",null,"Et vellykket kall returnerer kvittering med en 200-statuskode sammen med en ",(0,a.kt)("em",{parentName:"p"},"transaksjonsid")," som er Skatteetatens\nreferanse til endringen. Denne ",(0,a.kt)("em",{parentName:"p"},"transaksjonsiden")," b\xf8r oppdragsgiver ta vare p\xe5 for sporbarhet, og for senere \xe5 kunne\nreferere til endringen."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTTP 200-statuskode bekrefter at Skatteetaten har mottatt og tatt ansvaret for at endringen blir utf\xf8rt.")),(0,a.kt)("p",null,"Ved valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende feilmelding."),(0,a.kt)("h3",{id:"asynkron-validering-1"},"Asynkron validering"),(0,a.kt)("p",null,"Det gj\xf8res per n\xe5 ingen asynkron validering p\xe5 noen av endepunktene for endring."),(0,a.kt)("p",null,"Det gis per n\xe5 ingen mottaksstatus p\xe5 endringer, f.eks. om en endring er reskontrof\xf8rt. Dersom det oppst\xe5r feil utover\nsynkron validering, og oppdragsgiver m\xe5 foreta seg noe, vil varsling skje manuelt. Automatisk varsling vil kunne\netableres sammen med nye innkrevingsl\xf8sninger."),(0,a.kt)("h3",{id:"feilh\xe5ndtering-1"},"Feilh\xe5ndtering"),(0,a.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved endring av et innkrevingsoppdrag, og er\nusikker p\xe5 om kravet faktisk ble endret hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt. Den samme\nendringen kan sendes inn et vilk\xe5rlig antall ganger med samme resultat. Dersom en allerede eksisterende gyldig endring\nsendes inn p\xe5 nytt, vil det fremdeles returneres en HTTP 200-statuskode."),(0,a.kt)("h3",{id:"sekvensdiagram-1"},"Sekvensdiagram"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(8958).Z,width:"1247",height:"597"})),(0,a.kt)("h2",{id:"avskriv-et-innkrevingsoppdrag"},"Avskriv et innkrevingsoppdrag"),(0,a.kt)("p",null,"Innkrevingsoppdrag kan avskrives ved et POST-kall til\nendepunktet ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/avskriving"),". Endepunktet benyttes n\xe5r\noppdragsgiver mener at kravet ikke lenger skal kreves inn, eksempelvis fordi oppdragsgiver har frafalt kravet."),(0,a.kt)("p",null,"Merk at et innkrevingsoppdrag ikke kan avskrives umiddelbart etter opprettelse; det kan f\xf8rst avskrives etter at\nSkatteetaten har reskontrof\xf8rt det. Ved normal drift vil dette skje tiln\xe6rmet \xf8yeblikkelig."),(0,a.kt)("h3",{id:"synkron-validering-ved-mottak-2"},"Synkron validering ved mottak"),(0,a.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende ",(0,a.kt)("inlineCode",{parentName:"p"},"AvskrivingRequest"),"-objektet er iht.\nOpenAPI-spesifikasjonen."),(0,a.kt)("p",null,"Et vellykket kall returnerer kvittering med en 200-statuskode sammen med en ",(0,a.kt)("em",{parentName:"p"},"transaksjonsid")," som er Skatteetatens\nreferanse til avskrivingen. Denne ",(0,a.kt)("em",{parentName:"p"},"transaksjonsiden")," b\xf8r oppdragsgiver ta vare p\xe5 for sporbarhet, og for senere \xe5 kunne\nreferere til avskrivingen."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTTP 200-statuskode bekrefter at Skatteetaten har mottatt og tatt ansvaret for at avskrivingen blir utf\xf8rt.")),(0,a.kt)("p",null,"Ved valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende feilmelding."),(0,a.kt)("h3",{id:"asynkron-validering-2"},"Asynkron validering"),(0,a.kt)("p",null,"Det gj\xf8res per n\xe5 ingen asynkron validering ved avskriving."),(0,a.kt)("p",null,"Det gis per n\xe5 ingen mottaksstatus p\xe5 avskrivinger. F.eks. om avskrivningen er reskontrof\xf8rt. Dersom det oppst\xe5r feil\nutover synkron validering, og oppdragsgiver m\xe5 foreta seg noe, vil varsling skje manuelt. Automatisk varsling vil kunne\netableres sammen med nye innkrevingsl\xf8sninger."),(0,a.kt)("h3",{id:"feilh\xe5ndtering-2"},"Feilh\xe5ndtering"),(0,a.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved avskriving av innkrevingsoppdrag, og er\nusikker p\xe5 om kravet faktisk ble avskrevet hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt.\nEt innkrevingsoppdrag som allerede er avskrevet, kan ikke avskrives p\xe5 nytt. I slike tilfeller returneres en HTTP\n409-statuskode med en feilmelding."),(0,a.kt)("h3",{id:"sekvensdiagram-2"},"Sekvensdiagram"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(2444).Z,width:"1250",height:"592"})),(0,a.kt)("h2",{id:"grensesnittavstemming-av-et-innkrevingsoppdrag"},"Grensesnittavstemming av et innkrevingsoppdrag"),(0,a.kt)("p",null,"Tjenesten gj\xf8r det mulig for oppdragsgiver \xe5 avstemme at krav, endringer p\xe5 krav og avskrivinger er registrert korrekt i\nSkatteetatens kravmottak. Alle registrerte opplysninger om et krav som er sendt inn gjennom grensesnittet kan hentes ved\net GET-kall til endepunktet ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/avstemming"),"."),(0,a.kt)("p",null,"Tjenesten returnerer for en gitt kravidentifikator:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Skatteetatens kravidentifikator for oppdraget"),(0,a.kt)("li",{parentName:"ul"},"Oppdragsgivers kravidentifikator (dersom den ble oversendt i det opprinnelige innkrevingsoppdraget)"),(0,a.kt)("li",{parentName:"ul"},"De foresp\xf8rslene som oppdragsgiver har sendt, i samme format som de ble sendt, med tidspunkt for mottak:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Det opprinnelige kravet"),(0,a.kt)("li",{parentName:"ul"},"Eventuelle endringer p\xe5 kravet, med transaksjonsid"),(0,a.kt)("li",{parentName:"ul"},"Eventuell avskriving av kravet, med transaksjonsid")))),(0,a.kt)("h2",{id:"se-kravdetaljer"},"Se kravdetaljer"),(0,a.kt)("p",null,"Tjenesten gir oppdragsgiver mulighet til \xe5 hente ut detaljer om et eksisterende krav ved \xe5 gj\xf8re et GET-kall til\nendepunktet ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}"),". Det finnes ogs\xe5 et\nmock-endepunkt i test tilgjengelig p\xe5\n",(0,a.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/mock"),' (Se "Kravdetaljer" i\n',(0,a.kt)("a",{parentName:"p",href:"https://app.swaggerhub.com/apis-docs/skatteetaten/oppdragsinnkreving-api/1.15.115#/Kravdetaljer"},"SwaggerHub"),")."),(0,a.kt)("p",null,"Oppdragsgiver m\xe5 angi hvilken type kravidentifikator som skal brukes. For krav mottatt gjennom det nye kravmottaket, kan\nSkatteetatens kravidentifikator benyttes. For alle andre krav kan oppdragsgivers egen kravidentifikator brukes."),(0,a.kt)("p",null,"Ved et vellykket kall for en gitt kravidentifikator vil tjenesten returnere:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Kravgrunnlag med dato for n\xe5r kravet var besluttet hos oppdragsgiver"),(0,a.kt)("li",{parentName:"ul"},"Informasjon om kravlinjene tilknyttet kravet:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Kravlinjens type (hovedstol eller renter)"),(0,a.kt)("li",{parentName:"ul"},"Det opprinnelige bel\xf8pet for kravet"),(0,a.kt)("li",{parentName:"ul"},"Det gjenst\xe5ende bel\xf8pet for kravet")))))}d.isMDXComponent=!0},2444:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/sekvensdiagram_avskriv_krav-50ffa3a16e1f4c252558833fb8baba3f.png"},8958:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/sekvensdiagram_endre_krav-e9b9e49dfe8f5c965f87f834a584a5bd.png"},4700:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/sekvensdiagram_nytt_krav-39a0afc02cf2be59f416eaee9dafb352.png"}}]);