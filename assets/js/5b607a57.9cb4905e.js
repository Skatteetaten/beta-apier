"use strict";(self.webpackChunkbeta_apier=self.webpackChunkbeta_apier||[]).push([[873],{3905:(e,t,n)=>{n.d(t,{Zo:()=>k,kt:()=>v});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),g=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},k=function(e){var t=g(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,k=o(e,["components","mdxType","originalType","parentName"]),p=g(n),d=a,v=p["".concat(s,".").concat(d)]||p[d]||m[d]||i;return n?r.createElement(v,l(l({ref:t},k),{},{components:n})):r.createElement(v,l({ref:t},k))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:a,l[1]=o;for(var g=2;g<i;g++)l[g]=n[g];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>g});var r=n(7462),a=(n(7294),n(3905));const i={},l="Tilgang til tjenesten",o={unversionedId:"kravogbetalinger/tilgang",id:"kravogbetalinger/tilgang",title:"Tilgang til tjenesten",description:"For \xe5 f\xe5 tilgang til tjenesten m\xe5 leverand\xf8ren ha underskrevet en pilotavtale med Skatteetaten.",source:"@site/docs/kravogbetalinger/01-tilgang.md",sourceDirName:"kravogbetalinger",slug:"/kravogbetalinger/tilgang",permalink:"/beta-apier/kravogbetalinger/tilgang",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"docs",previous:{title:"Krav og Betalinger",permalink:"/beta-apier/kravogbetalinger/"},next:{title:"Ofte stilte sp\xf8rsm\xe5l",permalink:"/beta-apier/kravogbetalinger/faq"}},s={},g=[],k={toc:g};function p(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,r.Z)({},k,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"tilgang-til-tjenesten"},"Tilgang til tjenesten"),(0,a.kt)("p",null,"For \xe5 f\xe5 tilgang til tjenesten m\xe5 leverand\xf8ren ha underskrevet en pilotavtale med Skatteetaten.\nTilgangsmekanismen vil v\xe6re en kombinasjon av Altinn Samtykke og ",(0,a.kt)("a",{parentName:"p",href:"https://skatteetaten.github.io/datasamarbeid-api-dokumentasjon/about_maskinporten.html"},"Maskinporten"),"."),(0,a.kt)("p",null,"Parten kan, hvis regnskapssystemet og/eller mobil- og nettbank har implementert st\xf8tte for det velge om den \xf8nsker \xe5 se egne krav.\nParten vil bli rutet til en godkjenningsdialog i Altinn Samtykke. N\xe5r parten har akseptert godkjenningsdialogen,\nvil finansforetaket/systemleverand\xf8ren kunne hente et autentiseringstoken (samtykkebevis) fra Altinn Samtykke som bekrefter aksepten,\nAPIet, identiteten til parten og identiteten til finansforetaket/systemleverand\xf8ren."),(0,a.kt)("p",null,"For \xe5 gj\xf8re kall mot Skatteetatens API for ",(0,a.kt)("strong",{parentName:"p"},"krav og betalinger")," m\xe5 finansforetaket/systemleverand\xf8ren hente et autoriseringstoken\n(tilgangsbevis) fra Maskinporten. Begge disse bevisene m\xe5 legges ved i kall mot APIet. Skatteetaten vil validere bevisene og vil returnere\ndata hvis disse er gyldige (har de riktige signaturene)."),(0,a.kt)("p",null,"I p\xe5f\xf8lgende kall mot APIet m\xe5 samtykkebeviset og tilgangsbeviset fornyes da disse har kort levetid, typisk 20 \u2013 60 sekunder."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Tilgangeksempel",src:n(5611).Z,width:"1177",height:"597"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Parten logger seg p\xe5 ",(0,a.kt)("em",{parentName:"p"},"Nettbanken")," og ber om \xe5 f\xe5 tilgang til sine ",(0,a.kt)("strong",{parentName:"p"},"krav og betalinger")," (knapp/lenke)")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Hvis det ikke foreligger noe gyldig samtikke (g\xe5r ut etter 90 dager) s\xe5 m\xe5 ",(0,a.kt)("em",{parentName:"p"},"Nettbanken")," gj\xf8r en redirect til\nAltinn for en gitt samtykkekode (authorizationCode) og be parten samtykke p\xe5 nytt.\nBruker m\xe5 identifisere seg via idporten, velger part og bekrefte samtykket med varighet 90 dager.\nSamtykket lagres i Altinn Samtykke. Samtykkeavtalen med gitt AuthorizationCode er satt opp av SKE i Altinn Samtykke.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("em",{parentName:"p"},"Nettbanken")," ber Altinn om et access token for parten p\xe5 samme authorizationCode og f\xe5r tilbake et signert access-token (samtykkebevis).\nEller en feil hvis det ikke finnes samtykke for denne parten.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("em",{parentName:"p"},"Nettbanken")," ber Maskinporten om et access token (tilgangsbevis) for apiet, som er identifisert med scope:skatteetaten:kravogbetalinger.\nDette forvaltes av SKE, og SKE m\xe5 p\xe5 forh\xe5nd ha gitt ",(0,a.kt)("em",{parentName:"p"},"Nettbanken")," tilgang til scopet for apiet.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("em",{parentName:"p"},"Nettbanken")," gj\xf8r s\xe5 et kall mot kravogbetalinger api-et og legger med samtykkebeviset i headeren ",(0,a.kt)("strong",{parentName:"p"},"AltinnSamtykke")," og tilgangsbeviset i headeren ",(0,a.kt)("strong",{parentName:"p"},"Authorization"),".\nSkatteetaten validerer signaturer og innsynsbeviset og leverer partens data (orgnr)"))),(0,a.kt)("p",null,"Finansforetaket og systemleverand\xf8ren er ansvarlig for at kun kunden (parten), eller person som har myndighet til \xe5 opptre p\xe5\nvegne av denne, f\xe5r tilgang til ",(0,a.kt)("strong",{parentName:"p"},"krav og betalinger")," i regnskapssystemet eller mobil- og nettbanken.\nDet vil med andre ord v\xe6re finansforetaket og systemleverand\xf8rens p\xe5loggingssystemer som avgj\xf8r hvem som\nhar tilgang til \xe5 se oversikten i regnskapssystemet/mobil- og nettbanken."),(0,a.kt)("p",null,"Innsynet vil gjelde i 90 dager fra godkjenningsdato. Finansforetaket og systemleverand\xf8ren kan gj\xf8re flere kall\np\xe5 vegne av parten i denne perioden for \xe5 hente oppdaterte krav. Parten kan velge \xe5 trekke godkjenningen via\nAltinn Samtykke. Skatteetaten kan velge \xe5 trekke tilgangen til finansforetaket eller systemleverand\xf8ren via Maskinporten."))}p.isMDXComponent=!0},5611:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/tilgang-kravogbetalinger-5d2cbe1b1951c2b835191e74f22040a2.png"}}]);