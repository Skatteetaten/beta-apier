"use strict";(self.webpackChunkbeta_apier=self.webpackChunkbeta_apier||[]).push([[7967],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=r.createContext({}),k=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=k(e.components);return r.createElement(p.Provider,{value:n},e.children)},o="mdxType",v={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),o=k(t),g=i,f=o["".concat(p,".").concat(g)]||o[g]||v[g]||a;return t?r.createElement(f,s(s({ref:n},d),{},{components:t})):r.createElement(f,s({ref:n},d))}));function f(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,s=new Array(a);s[0]=g;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[o]="string"==typeof e?e:i,s[1]=l;for(var k=2;k<a;k++)s[k]=t[k];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},7670:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>o,frontMatter:()=>a,metadata:()=>l,toc:()=>k});var r=t(7462),i=(t(7294),t(3905));const a={},s="Beskrivelse av tjenester",l={unversionedId:"innkrevingsoppdrag/beskrivelse-av-tjenester",id:"innkrevingsoppdrag/beskrivelse-av-tjenester",title:"Beskrivelse av tjenester",description:"Lenke til API-dokumentasjonen finnes i menyen til venstre.",source:"@site/docs/innkrevingsoppdrag/beskrivelse-av-tjenester.md",sourceDirName:"innkrevingsoppdrag",slug:"/innkrevingsoppdrag/beskrivelse-av-tjenester",permalink:"/beta-apier/innkrevingsoppdrag/beskrivelse-av-tjenester",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Teknisk dokumentasjon",permalink:"/beta-apier/innkrevingsoppdrag/teknisk-dokumentasjon"},next:{title:"Mottaksbekreftelse",permalink:"/beta-apier/innkrevingsoppdrag/mottaksbekreftelse"}},p={},k=[{value:"Opprett et innkrevingsoppdrag",id:"opprett-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering",level:3},{value:"Endre et innkrevingsoppdrag",id:"endre-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering-1",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-1",level:3},{value:"Avskriv et innkrevingsoppdrag",id:"avskriv-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering-2",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-2",level:3}],d={toc:k};function o(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"beskrivelse-av-tjenester"},"Beskrivelse av tjenester"),(0,i.kt)("p",null,"Lenke til API-dokumentasjonen finnes i menyen til venstre.\nUnder f\xf8lger en beskrivelse av hvordan de ulike tjenestene brukes, og eventuelle hensyn som m\xe5 tas."),(0,i.kt)("h2",{id:"opprett-et-innkrevingsoppdrag"},"Opprett et innkrevingsoppdrag"),(0,i.kt)("p",null,"Et innkrevingsoppdrag opprettes i Skatteetatens innkrevingssystemer ved et POST-kall\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/innkrevingsoppdrag"),". Et vellykket kall returnerer en 201-statuskode sammen\nmed en ",(0,i.kt)("em",{parentName:"p"},"kravidentifikator"),", som er Skatteetatens referanse til innkrevingsoppdraget."),(0,i.kt)("p",null,"Denne kravidentifikatoren b\xf8r oppdragsgiver ta vare p\xe5 for sporbarhet."),(0,i.kt)("p",null,"Se deretter ",(0,i.kt)("a",{parentName:"p",href:"./mottaksbekreftelse"},"mottaksbekreftelse")),(0,i.kt)("h3",{id:"validering"},"Validering"),(0,i.kt)("p",null,"Tjenesten gj\xf8r validering av ",(0,i.kt)("inlineCode",{parentName:"p"},"OpprettInnkrevingsoppdragRequest"),"-objektet som er\nmeldingskroppen i POST-kallet. Denne valideringen sikrer at alle n\xf8dvendige felter er korrekt utfylt og at dataene\nstemmer overens med tjenestens API-spesifikasjon. Ved valideringsfeil returneres HTTP statuskode 422\nsamt informasjon om valideringsfeilen. Oppdragsgiver m\xe5 deretter korrigere innkrevingsoppdraget og sende det\ninn p\xe5 nytt. ",(0,i.kt)("em",{parentName:"p"},"Merk: Etter korreksjon kan det oppst\xe5 ytterligere valideringsfeil fra p\xe5f\xf8lgende valideringsregler\nettersom valideringsreglene utf\xf8res sekvensielt.")),(0,i.kt)("p",null,"Etter at kallet er prosessert, foretas en ekstra asynkron validering. Her sjekkes at innholdet i innkrevingsoppdraget\ner gj\xf8r Skatteetaten i stand til \xe5 f\xe5 krevd inn. ",(0,i.kt)("strong",{parentName:"p"},"Det betyr at en HTTP 201-statuskode fra ",(0,i.kt)("inlineCode",{parentName:"strong"},"/api/v1/innkrevingsoppdrag"),"\nbekrefter mottak av et innkrevingsoppdrag, men gir ikke bekreftelse p\xe5 at Skatteetaten har tatt over ansvaret og kan\nkreve det inn.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Seksjonen vil utvides med anbefalt arbeidsflyt for \xe5 h\xe5ndtere dette.\n")),(0,i.kt)("p",null,"Per n\xe5 er eneste valideringsregel for NAVs tilbakekrevingskrav, hvor det gj\xf8res et oppslag mot Folkeregisteret for \xe5\nsikre at skyldneren ikke bare er en reell person, men ogs\xe5 at vedkommende fortsatt er i live. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Seksjonen vil utvides etterhvert som flere oppdragsgivere og typer krav st\xf8ttes.\n")),(0,i.kt)("h3",{id:"feilh\xe5ndtering"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved opprettelse av nye innkrevingsoppdrag, og\ner usikker p\xe5 om kravet faktisk har blitt opprettet hos Skatteetaten, anbefales det \xe5 sende kravet p\xe5 nytt. Tjenesten\nv\xe5r sikrer unikhet p\xe5 ",(0,i.kt)("inlineCode",{parentName:"p"},"oppdragsgiversKravidentifikator"),". Dersom kravet allerede finnes i v\xe5rt system, vil det returneres\nen HTTP 422-statuskode med en beskrivende feilmelding. Hvis det ikke finnes, vil innkrevingsoppdraget bli opprettet og\nprosessert."),(0,i.kt)("h2",{id:"endre-et-innkrevingsoppdrag"},"Endre et innkrevingsoppdrag"),(0,i.kt)("p",null,"Innkrevingsoppdrag kan endres ved et PUT-kall til endepunktet ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/innkrevingsoppdrag/endring"),". Endrings-tjenesten\nbrukes til \xe5 gj\xf8re korreksjoner p\xe5 et innkrevingsoppdrag, f.eks. der skyldner har betalt deler av bel\xf8pet til\noppdragsgiver. Hvis et nytt vedtak fattes hos oppdragsgiver, slik at det i praksis er snakk om et nytt krav,\nb\xf8r det opprinnelige innkrevingsoppdraget antageligvis ",(0,i.kt)("a",{parentName:"p",href:"#avskriv-et-innkrevingsoppdrag"},"avskrives"),",\nf\xf8r det ",(0,i.kt)("a",{parentName:"p",href:"#opprett-et-innkrevingsoppdrag"},"opprettes et nytt"),"."),(0,i.kt)("p",null,"Merk at et innkrevingsoppdrag kan ikke endres umiddelbart etter at det er opprettet, men f\xf8rst etter at Skatteetaten har\nreskontrof\xf8rt det. Ved normal oppf\xf8rsel skjer dette tiln\xe6rmet \xf8yeblikkelig."),(0,i.kt)("h3",{id:"validering-1"},"Validering"),(0,i.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende ",(0,i.kt)("inlineCode",{parentName:"p"},"EndringRequest"),"-objektet er ihht. Openapi spesifikasjon.\nVed valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende feilmelding."),(0,i.kt)("h3",{id:"feilh\xe5ndtering-1"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved endring av et innkrevingsoppdrag, og\ner usikker p\xe5 om kravet faktisk ble endret hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt. Den samme\nendringen kan sendes inn et vilk\xe5rlig antall ganger med samme resultat. Dersom en allerede eksisterende gyldig endring\nsendes inn p\xe5 nytt, vil det fremdeles returneres en HTTP 200-statuskode."),(0,i.kt)("h2",{id:"avskriv-et-innkrevingsoppdrag"},"Avskriv et innkrevingsoppdrag"),(0,i.kt)("p",null,"Innkrevingsoppdrag kan avskrives ved et POST-kall til endepunktet ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/innkrevingsoppdrag/avskriving"),". Endepunktet\nbenyttes n\xe5r oppdragsgiver mener at kravet ikke lenger skal innkreves."),(0,i.kt)("h3",{id:"validering-2"},"Validering"),(0,i.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende ",(0,i.kt)("inlineCode",{parentName:"p"},"AvskrivingRequest"),"-objektet er ihht. Openapi\nspesifikasjon. Ved valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende feilmelding."),(0,i.kt)("h3",{id:"feilh\xe5ndtering-2"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved avskriving av innkrevingsoppdrag, og\ner usikker p\xe5 om kravet faktisk ble avskrevet hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt."),(0,i.kt)("p",null,"Et allerede avskrevet innkrevingsoppdrag kan ikke avskrives p\xe5 nytt, da vil det returneres en HTTP 409-statuskode med\nen feilmelding."),(0,i.kt)("h1",{id:"hent-valideringsfeil-for-et-innkrevingsoppdrag"},"Hent valideringsfeil for et innkrevingsoppdrag"),(0,i.kt)("p",null,"Eventuelle valideringsfeil fra ",(0,i.kt)("a",{parentName:"p",href:"#validering"},"den asynkrone valideringen ved opprettelse av et innkrevingsoppdrag")," kan\nhentes ut ved et GET-kall til endepunktet ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/innkrevingsoppdrag/{kravidentifikator}/valideringsfeil"),"."),(0,i.kt)("p",null,"Dersom den asynkrone valideringen ikke resulterte i noen valideringsfeil, returneres en tom liste."))}o.isMDXComponent=!0}}]);