"use strict";(self.webpackChunkbeta_apier=self.webpackChunkbeta_apier||[]).push([[7967],{3905:(e,n,r)=>{r.d(n,{Zo:()=>d,kt:()=>f});var t=r(7294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=t.createContext({}),k=function(e){var n=t.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},d=function(e){var n=k(e.components);return t.createElement(p.Provider,{value:n},e.children)},o="mdxType",v={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var r=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),o=k(r),g=i,f=o["".concat(p,".").concat(g)]||o[g]||v[g]||a;return r?t.createElement(f,s(s({ref:n},d),{},{components:r})):t.createElement(f,s({ref:n},d))}));function f(e,n){var r=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=r.length,s=new Array(a);s[0]=g;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[o]="string"==typeof e?e:i,s[1]=l;for(var k=2;k<a;k++)s[k]=r[k];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}g.displayName="MDXCreateElement"},7670:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>o,frontMatter:()=>a,metadata:()=>l,toc:()=>k});var t=r(7462),i=(r(7294),r(3905));const a={},s="Beskrivelse av tjenester",l={unversionedId:"innkrevingsoppdrag/beskrivelse-av-tjenester",id:"innkrevingsoppdrag/beskrivelse-av-tjenester",title:"Beskrivelse av tjenester",description:"Lenke til API-dokumentasjonen finnes i menyen til venstre.",source:"@site/docs/innkrevingsoppdrag/beskrivelse-av-tjenester.md",sourceDirName:"innkrevingsoppdrag",slug:"/innkrevingsoppdrag/beskrivelse-av-tjenester",permalink:"/beta-apier/innkrevingsoppdrag/beskrivelse-av-tjenester",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Teknisk dokumentasjon",permalink:"/beta-apier/innkrevingsoppdrag/teknisk-dokumentasjon"},next:{title:"Mottaksbekreftelse",permalink:"/beta-apier/innkrevingsoppdrag/mottaksbekreftelse"}},p={},k=[{value:"Opprett et innkrevingsoppdrag",id:"opprett-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering",level:3},{value:"Endre et innkrevingsoppdrag",id:"endre-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering-1",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-1",level:3},{value:"Avskriv et innkrevingsoppdrag",id:"avskriv-et-innkrevingsoppdrag",level:2},{value:"Validering",id:"validering-2",level:3},{value:"Feilh\xe5ndtering",id:"feilh\xe5ndtering-2",level:3}],d={toc:k};function o(e){let{components:n,...r}=e;return(0,i.kt)("wrapper",(0,t.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"beskrivelse-av-tjenester"},"Beskrivelse av tjenester"),(0,i.kt)("p",null,"Lenke til API-dokumentasjonen finnes i menyen til venstre.\nUnder f\xf8lger en beskrivelse av hvordan de ulike tjenestene brukes, og eventuelle hensyn som m\xe5 tas."),(0,i.kt)("h2",{id:"opprett-et-innkrevingsoppdrag"},"Opprett et innkrevingsoppdrag"),(0,i.kt)("p",null,"Et innkrevingsoppdrag opprettes i Skatteetatens innkrevingssystemer ved et POST-kall\ntil ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag"),". Et vellykket kall returnerer en 201-statuskode sammen\nmed en ",(0,i.kt)("em",{parentName:"p"},"kravidentifikator"),", som er Skatteetatens referanse til innkrevingsoppdraget."),(0,i.kt)("p",null,"Denne kravidentifikatoren b\xf8r oppdragsgiver ta vare p\xe5 for sporbarhet."),(0,i.kt)("p",null,"Se deretter ",(0,i.kt)("a",{parentName:"p",href:"./mottaksbekreftelse"},"mottaksbekreftelse"),"."),(0,i.kt)("h3",{id:"validering"},"Validering"),(0,i.kt)("p",null,"Tjenesten gj\xf8r validering av ",(0,i.kt)("inlineCode",{parentName:"p"},"OpprettInnkrevingsoppdragRequest"),"-objektet som er meldingskroppen i POST-kallet. Denne\nvalideringen sikrer at alle n\xf8dvendige felter er korrekt utfylt og at dataene stemmer overens med tjenestens\nAPI-spesifikasjon. Ved valideringsfeil returneres HTTP statuskode 422 samt informasjon om valideringsfeilen.\nOppdragsgiver m\xe5 deretter korrigere innkrevingsoppdraget og sende det inn p\xe5 nytt. ",(0,i.kt)("em",{parentName:"p"},"Merk: Etter korreksjon kan det\noppst\xe5 ytterligere valideringsfeil fra p\xe5f\xf8lgende valideringsregler ettersom valideringsreglene utf\xf8res sekvensielt.")),(0,i.kt)("p",null,"Etter at kallet er prosessert, foretas en ekstra asynkron validering. Her sjekkes det om innholdet i\ninnkrevingsoppdraget gj\xf8r det mulig for Skatteetaten \xe5 kreve inn. ",(0,i.kt)("strong",{parentName:"p"},"Det betyr at en HTTP 201-statuskode fra\n",(0,i.kt)("inlineCode",{parentName:"strong"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag")," bekrefter mottak av et innkrevingsoppdrag, men gir ikke\nbekreftelse p\xe5 at Skatteetaten har tatt over ansvaret og kan kreve det inn.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Seksjonen vil utvides med anbefalt arbeidsflyt for \xe5 h\xe5ndtere dette.\n")),(0,i.kt)("p",null,"Per n\xe5 er eneste valideringsregel for NAVs tilbakekrevingskrav at det gj\xf8res et oppslag mot Folkeregisteret for \xe5\nsikre at skyldneren b\xe5de er en reell person og at vedkommende fortsatt er i live."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Seksjonen vil utvides etterhvert som flere oppdragsgivere og typer krav st\xf8ttes.\n")),(0,i.kt)("h3",{id:"feilh\xe5ndtering"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved opprettelse av nye innkrevingsoppdrag, og\ner usikker p\xe5 om kravet faktisk har blitt opprettet hos Skatteetaten, anbefales det \xe5 sende kravet p\xe5 nytt. Tjenesten\nv\xe5r sikrer unikhet p\xe5 ",(0,i.kt)("inlineCode",{parentName:"p"},"oppdragsgiversKravidentifikator"),". Dersom kravet allerede finnes i v\xe5rt system, vil det returneres\nen HTTP 422-statuskode med en beskrivende feilmelding. Hvis det ikke finnes, vil innkrevingsoppdraget bli opprettet og\nprosessert."),(0,i.kt)("h2",{id:"endre-et-innkrevingsoppdrag"},"Endre et innkrevingsoppdrag"),(0,i.kt)("p",null,"Innkrevingsoppdrag kan endres ved et PUT-kall til endepunktet\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/endring"),". Endrings-tjenesten brukes til \xe5 gj\xf8re korreksjoner\np\xe5 et innkrevingsoppdrag, f.eks. der skyldner har betalt deler av bel\xf8pet til oppdragsgiver. Hvis et nytt vedtak fattes\nhos oppdragsgiver, slik at det i praksis er snakk om et nytt krav, b\xf8r det opprinnelige innkrevingsoppdraget\nantageligvis ",(0,i.kt)("a",{parentName:"p",href:"#avskriv-et-innkrevingsoppdrag"},"avskrives"),", f\xf8r det ",(0,i.kt)("a",{parentName:"p",href:"#opprett-et-innkrevingsoppdrag"},"opprettes et nytt"),"."),(0,i.kt)("p",null,"Merk at et innkrevingsoppdrag ikke kan endres umiddelbart etter opprettelse; det kan f\xf8rst endres etter at Skatteetaten\nhar reskontrof\xf8rt det. Ved normal oppf\xf8rsel skjer dette tiln\xe6rmet \xf8yeblikkelig."),(0,i.kt)("h3",{id:"validering-1"},"Validering"),(0,i.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende ",(0,i.kt)("inlineCode",{parentName:"p"},"EndringRequest"),"-objektet er iht. Openapi-spesifikasjonen.\nVed valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende feilmelding."),(0,i.kt)("h3",{id:"feilh\xe5ndtering-1"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved endring av et innkrevingsoppdrag, og er\nusikker p\xe5 om kravet faktisk ble endret hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt. Den samme\nendringen kan sendes inn et vilk\xe5rlig antall ganger med samme resultat. Dersom en allerede eksisterende gyldig endring\nsendes inn p\xe5 nytt, vil det fremdeles returneres en HTTP 200-statuskode."),(0,i.kt)("h2",{id:"avskriv-et-innkrevingsoppdrag"},"Avskriv et innkrevingsoppdrag"),(0,i.kt)("p",null,"Innkrevingsoppdrag kan avskrives ved et POST-kall til endepunktet\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/avskriving"),". Endepunktet benyttes n\xe5r oppdragsgiver mener at\nkravet ikke lenger skal innkreves."),(0,i.kt)("h3",{id:"validering-2"},"Validering"),(0,i.kt)("p",null,"Tjenesten foretar en synkron validering av at det innkommende ",(0,i.kt)("inlineCode",{parentName:"p"},"AvskrivingRequest"),"-objektet er iht.\nOpenapi-spesifikasjonen. Ved valideringsfeil vil endepunktet returnere en HTTP 422-statuskode med en beskrivende\nfeilmelding."),(0,i.kt)("h3",{id:"feilh\xe5ndtering-2"},"Feilh\xe5ndtering"),(0,i.kt)("p",null,"I tilfeller hvor klienten opplever nettverksfeil eller andre usikkerheter ved avskriving av innkrevingsoppdrag, og\ner usikker p\xe5 om kravet faktisk ble avskrevet hos Skatteetaten, anbefales det \xe5 sende foresp\xf8rselen p\xe5 nytt."),(0,i.kt)("p",null,"Et innkrevingsoppdrag som allerede er avskrevet, kan ikke avskrives p\xe5 nytt. I slike tilfeller returneres en HTTP\n409-statuskode med en feilmelding."),(0,i.kt)("h1",{id:"hent-valideringsfeil-for-et-innkrevingsoppdrag"},"Hent valideringsfeil for et innkrevingsoppdrag"),(0,i.kt)("p",null,"Eventuelle valideringsfeil fra ",(0,i.kt)("a",{parentName:"p",href:"#validering"},"den asynkrone valideringen ved opprettelse av et innkrevingsoppdrag")," kan\nhentes ut ved et GET-kall til endepunktet\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/innkreving/innkrevingsoppdrag/v1/innkrevingsoppdrag/{kravidentifikator}/valideringsfeil"),"."),(0,i.kt)("p",null,"Dersom den asynkrone valideringen ikke resulterte i noen valideringsfeil, returneres en tom liste."))}o.isMDXComponent=!0}}]);